<div id="print-content">   
    <!-- Modal -->
    <div class="modal-header hidden-print">
        <button type="button" class="close" ng-click="vm.close()"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Report</h4>
    </div>
    <div class="modal-body" >
    <div ng-hide="vm.studyAreaService.selectedStudyArea">A study area is needed before viewing the report</div>   
    <div ng-show="vm.studyAreaService.selectedStudyArea">
            <div class="form-group hidden-print">
                <div class="wim-alert" >Enter a report title and/or comments here that will display on the printed report.  Use the print button below.</div>
                <label >Enter report title:</label>
                <input type="text" class="form-control" ng-model="vm.reportTitle" placeholder="Title">

                <label>Enter comments:</label>
                <textarea rows="3" class="form-control" ng-model="vm.reportComments" placeholder="Comments"></textarea>
            
            </div>
            <div id="printArea">
                <h2>{{vm.reportTitle}}</h2>
                <div ng-if="vm.studyAreaService.selectedStudyArea">

                    <div class="row">
                        <div class="col-md-7"><strong>Region ID:</strong></div>
                        <div class="col-md-5">{{vm.studyAreaService.selectedStudyArea.RegionID}}</div>
                    </div>
                    <div class="row" ng-if="vm.studyAreaService.selectedStudyArea.Pourpoint.length == 1">
                        <div class="col-md-7"><strong>Workspace ID:</strong></div>
                        <div class="col-md-5">{{vm.studyAreaService.selectedStudyArea.WorkspaceID}}</div>
                    </div>
                    <div class="row" ng-if="vm.studyAreaService.selectedStudyArea.Pourpoint.length == 1">
                        <div class="col-md-7"><strong>Clicked Point (Latitude, Longitude):</strong></div>
                        <div class="col-md-5">{{vm.studyAreaService.selectedStudyArea.Pourpoint[0].Latitude.toFixed(5)}}, {{vm.studyAreaService.selectedStudyArea.Pourpoint[0].Longitude.toFixed(5)}}</div>
                    </div>
                    <div class="row" ng-if="vm.studyAreaService.selectedStudyArea.Pourpoint.length > 1">
                        <div class="col-md-7"><strong>Clicked line (Latitude, Longitude):</strong></div>
                        <div class = "col-md-5">
                            <div ng-repeat="coordinate in vm.studyAreaService.selectedStudyArea.LinePoints">{{coordinate.Latitude.toFixed(5)}}, {{coordinate.Longitude.toFixed(5)}}</div>
                        </div>
                    </div>
                    
                    <div ng-if="vm.studyAreaService.selectedStudyArea.NHDStream.GNIS_NAME" class="row">
                        <div class="col-md-7"><strong>NHD Stream GNIS Name:</strong></div>
                        <div class="col-md-5">{{vm.studyAreaService.selectedStudyArea.NHDStream.GNIS_NAME}} 
                            <i ng-mouseover="showTooltip = true" ng-mouseleave="showTooltip = false" class="fa fa-question-circle"></i>
                            <span ng-show="showTooltip" class="report-tooltip">
                                <span>To view information about how stream name was selected or to edit stream name, see "NHD Features of Delineated Basin" section below.</span>
                            </span>
                        </div>
                    </div>
                    <div ng-if="vm.studyAreaService.selectedStudyArea.WBDHUC8.huc8" class="row">
                        <div class="col-md-7"><strong>HUC 8:</strong></div>
                        <div class="col-md-5">{{vm.studyAreaService.selectedStudyArea.WBDHUC8.huc8}} <span ng-if="vm.studyAreaService.selectedStudyArea.WBDHUC8.name">({{vm.studyAreaService.selectedStudyArea.WBDHUC8.name}})</span></div>
                    </div>
                    <div class="row">
                        <div class="col-md-7"><strong>Time:</strong></div>
                        <div class="col-md-5">{{vm.studyAreaService.selectedStudyArea.Date | date:'yyyy-MM-dd HH:mm:ss Z'}}</div>
                    </div>

                    <!--<dl class="dl-horizontal">
            <dt>Region ID:</dt><dd>{{vm.studyAreaService.selectedStudyArea.RegionID}}</dd>
            <dt>Workspace ID:</dt><dd>{{vm.studyAreaService.selectedStudyArea.WorkspaceID}}</dd>
            <dt>Clicked Point (Latitude, Longitude):</dt><dd>{{vm.studyAreaService.selectedStudyArea.Pourpoint[0].Latitude.toFixed(5)}}, {{vm.studyAreaService.selectedStudyArea.Pourpoint[0].Longitude.toFixed(5)}}</dd>
            <dt>Time:</dt><dd>{{vm.studyAreaService.selectedStudyArea.Date | date:'yyyy-MM-dd HH:mm:ss Z'}}</dd>
        </dl>-->

                    <leaflet id="reportMap" width="100%" height="400px" layers="vm.layers" geojson="vm.geojson" geojson-nested="true" center="vm.center" defaults="vm.defaults"></leaflet><br />

                </div>

                <br />
                <div ng-if="vm.reportComments != 'Some comments here'">
                    <p>{{vm.reportComments}}</p>
                </div>

                <div ng-show="vm.showReport">
                    <button class="expand-report" ng-show="vm.collapsed" ng-click="vm.expandAll('expand')"><span class="fa fa-plus-square"></span>&nbsp;Expand All</button>
                    <button class="expand-report" ng-show="!vm.collapsed" ng-click="vm.expandAll('collapse')"><span class="fa fa-plus-square"></span>&nbsp;Collapse All</button>
                    <!--Parameter Table if just basin chars-->
                    <div class="well well-sm" ng-show="vm.nssService.showBasinCharacteristicsTable">
                        <h3 class="collapsible" ng-click="vm.collapseSection($event, 'basin')"><i ng-class="!vm.basinCharCollapsed ? 'fa fa-chevron-right': 'fa fa-chevron-down'"></i>&nbsp;&nbsp;Basin Characteristics</h3>
                            <div class="collapsible-content">
                                <table id="mainParamTable" class="mainParamTable table table-condensed">
                                    <thead class="param-table">
                                        <tr>
                                            <th>Parameter Code</th>
                                            <th>Parameter Description</th>
                                            <th>Value</th>
                                            <th ng-if="vm.studyAreaService.selectedStudyArea.Disclaimers.isRegulated && vm.showRegulation">Unregulated Value</th>
                                            <th>Unit</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="parameter in vm.studyAreaService.studyAreaParameterList  | orderBy:'code'">
                                            <td ng-bind="parameter.code"></td>
                                            <td ng-bind="parameter.description"></td>
                                            <td>{{parameter.value == -99999 ? 'undefined' : parameter.value}}</td>
                                            <td ng-if="vm.studyAreaService.selectedStudyArea.Disclaimers.isRegulated && vm.showRegulation">{{parameter.unRegulatedValue == -99999 ? 'undefined' : parameter.unRegulatedValue.toFixed(3)}}</td>
                                            <td ng-bind="parameter.unit"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </h3>
                    </div>

                    <!--Study Area Disclaimers-->
                    <div class="well well-sm" ng-show="vm.canShowDisclaimers">
                        <h3>General Disclaimers</h3>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.parametersEdited">Parameter values have been edited, computed flows may not apply.</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.regulationChecked">Upstream regulation was checked for this watershed.</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.isRegulated">This watershed is {{vm.studyAreaService.regulationCheckResults.percentarearegulated.toFixed(2)}} percent regulated, computed flows may not apply.</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.isEdited">This watershed has been edited, computed flows and basin characteristics may not apply.  For more information, submit a support request from the 'Help' button in the upper-right of the screen, attach a pdf of this report and request assistance from your local StreamStats regional representative.</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.isInExclusionArea">{{vm.studyAreaService.selectedStudyArea.Disclaimers.isInExclusionArea}}</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.hasKarst">{{vm.studyAreaService.selectedStudyArea.Disclaimers.hasKarst}}</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.isStormDrain">The resulting delineations are derived from digital elevation data and storm drain vectors that have been processed to enforce drainage through storm drains.</div>
                        <div class="wim-alert-warning" ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.isStormDrain && vm.nssService.selectedStatisticsGroupList.length > 0">Urban regression equations for peak flows were not developed using streamgages which incorporate storm drain delineations and therefore should be used with caution.</div>
                    </div>

                    <!--Parameter Table for Flow Report-->
                    <div class="well well-sm" ng-show="vm.nssService.showFlowsTable" ng-repeat="statisticsGroup in vm.nssService.selectedStatisticsGroupList track by $index" ng-if="statisticsGroup.name != 'Flow-Duration Curve Transfer Method'">
                        <h3 class="collapsible" ng-click="vm.collapseSection($event, 'stats', statisticsGroup.name)"><i ng-class="!vm.sectionCollapsed[statisticsGroup.name] ? 'fa fa-chevron-right': 'fa fa-chevron-down'"></i>&nbsp;&nbsp;{{statisticsGroup.name}}</h3>
                        <div class="collapsible-content">
                            <div ng-repeat="regressionRegion in statisticsGroup.regressionRegions" ng-if="regressionRegion.parameters.length > 0">
                                <h3>{{statisticsGroup.name}} Parameters&nbsp;&nbsp;<span ng-bind="vm.GetRegressionRegionHeader(regressionRegion)"></span></h3>
                                <table id="{{vm.camelize(statisticsGroup.name + regressionRegion.name + 'ScenarioParamTable')}}" class="scenarioParamTable table table-condensed">
                                    <thead class="param-table">
                                        <tr>
                                            <th>Parameter Code</th>
                                            <th>Parameter Name</th>
                                            <th>Value</th>
                                            <th ng-if="vm.studyAreaService.selectedStudyArea.disclaimers.isRegulated && vm.showRegulation">Unregulated Value</th>
                                            <th>Units</th>
                                            <th>Min Limit</th>
                                            <th>Max Limit</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="parameter in regressionRegion.parameters">
                                            <td ng-bind="parameter.code"></td>
                                            <td ng-bind="parameter.name"></td>
                                            <td ng-class="(parameter.value < parameter.limits.min) || (parameter.value > parameter.limits.max) ? 'wim-warning' : ''">{{parameter.value == -99999 ? 'undefined' : parameter.value}}</td>
                                            <td ng-if="vm.studyAreaService.selectedStudyArea.disclaimers.isRegulated && vm.showRegulation" ng-class="(parameter.value < parameter.limits.min) || (parameter.value > parameter.limits.max) ? 'wim-warning' : ''">{{parameter.unRegulatedValue == -99999 ? 'undefined' : parameter.unRegulatedValue}}</td>
                                            <td ng-bind="parameter.unitType.unit"></td>
                                            <td ng-bind="parameter.limits.min"></td>
                                            <td ng-bind="parameter.limits.max"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!--Flow Report-->
                            <div ng-repeat="regressionRegion in statisticsGroup.regressionRegions">
                                <!--Scenario Disclaimers-->
                                <div ng-show="regressionRegion.disclaimer">
                                    <h3>{{statisticsGroup.name}} Disclaimers&nbsp;&nbsp;<span ng-bind="vm.GetRegressionRegionHeader(regressionRegion)"></span></h3>
                                    <div class="wim-alert-warning">{{regressionRegion.disclaimer}}</div>
                                </div>

                                <h3>{{statisticsGroup.name}} Flow Report&nbsp;&nbsp;<span ng-bind="vm.GetRegressionRegionHeader(regressionRegion)"></span></h3>
                                <span ng-show="regressionRegion.results[0].intervalBounds || regressionRegion.results[0].errors && regressionRegion.results[0].errors.length > 0">PIL: Lower 90% Prediction Interval, PIU: Upper 90% Prediction Interval, ASEp: Average Standard Error of Prediction, SE: Standard Error (other -- see report)</span>
                                <table id="{{vm.camelize(statisticsGroup.name + regressionRegion.name + 'ScenarioFlowTable')}}" class="scenarioFlowTable table table-condensed">
                                    <thead class="flow-table">
                                        <tr>
                                            <th>Statistic</th>
                                            <th>Value</th>
                                            <th ng-if="vm.studyAreaService.selectedStudyArea.Disclaimers.isRegulated && vm.showRegulation">Unregulated Value</th>
                                            <th>Unit</th>
                                            <th ng-if="regressionRegion.results[0].intervalBounds && regressionRegion.results[0].intervalBounds.lower">PIL</th>
                                            <th ng-if="regressionRegion.results[0].intervalBounds && regressionRegion.results[0].intervalBounds.upper">PIU</th>
                                            <th ng-if="regressionRegion.results[0].errors && regressionRegion.results[0].errors.length > 0" ng-repeat="error in regressionRegion.results[0].errors" ng-bind="error.code"></th>
                                            <th ng-if="regressionRegion.results[0].equivalentYears > 0">Equiv. Yrs.</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="stat in regressionRegion.results">
                                            <td>{{stat.name}}</td>
                                            <td>{{stat.value == -99999 ? 'undefined' : stat.value.toUSGSvalue()}}</td>
                                            <td ng-if="vm.studyAreaService.selectedStudyArea.Disclaimers.isRegulated && vm.showRegulation" ng-bind="stat.unRegulatedValue.toUSGSvalue()"></td>
                                            <td ng-bind="stat.unit.abbr"></td>
                                            <td ng-if="stat.intervalBounds.lower" ng-bind="stat.intervalBounds.lower.toUSGSvalue()"></td>
                                            <td ng-if="stat.intervalBounds.upper" ng-bind="stat.intervalBounds.upper.toUSGSvalue()"></td>
                                            <td ng-if="stat.errors && stat.errors.length > 0" ng-repeat="error in stat.errors" ng-bind="(error.value) ? error.value.toUSGSvalue() : '--'"></td>
                                            <td ng-if="stat.equivalentYears" ng-bind="stat.equivalentYears.toUSGSvalue()"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <h4>{{statisticsGroup.name}} Citations</h4>
                            <div ng-repeat="citation in statisticsGroup.citations">
                                <a href="{{citation.citationURL.replace('#','')}}" target="_blank">{{citation.author}}{{citation.title}}</a>
                            </div>
                        </div>
                    </div>

                    <!-- Hydrologic Features Application -->
                    <div class="well well-sm"  ng-if="vm.regionService.selectedRegion.Applications.indexOf('HydrologicFeatures') != -1 && vm.studyAreaService.selectedStudyArea.Pourpoint.length == 1" ng-init=vm.setStream(vm.studyAreaService.selectedStudyArea.NHDStream)>
                        <h3 class="collapsible" ng-click="vm.collapseSection($event, 'stats', 'HydrologicFeatures')"><i ng-class="!vm.sectionCollapsed['HydrologicFeatures'] ? 'fa fa-chevron-right': 'fa fa-chevron-down'"></i>&nbsp;&nbsp;NHD Features of Delineated Basin</h3>
                            <div class="collapsible-content">
                                <h3>NHD Streams Intersecting Basin Delineation Boundary</h3>
                                <small>This functionality attempts to find the stream name at the delineation point. The name of the nearest intersecting National Hydrography Dataset (NHD) stream is 
                                    selected by default to appear in the report above. NHD streams do not correspond to the StreamStats stream grid and may not be accurate.
                                    If you would like a different stream to appear in the above section, please make a selection below.
                                    
                                </small>
                                    <br><br>
                                    <div ng-show="vm.studyAreaService.selectedStudyArea.NHDStreamIntersections.length > 0">
                                    <table id="hydrologicFeaturesTable" class="mainParamTable table table-condensed">
                                        <thead class="param-table">
                                            <tr>
                                                <th>GNIS ID</th>
                                                <th>GNIS Name</th>
                                                <th>Distance from Clicked Point (ft)</th>
                                                <th>Selected Stream Name</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="stream in vm.studyAreaService.selectedStudyArea.NHDStreamIntersections | orderBy:'distanceToPourPoint'" >
                                                <td>{{stream.GNIS_ID}}</td>
                                                <td>{{stream.GNIS_NAME}}</td>
                                                <td>{{stream.distanceToPourPoint.toUSGSvalue()}}</td>
                                                <td><input type="radio" id='{{stream.GNIS_ID}}' name="streamName" ng-click="vm.setStream(stream)"><label for="{{stream.GNIS_ID}}">{{stream.GNIS_NAME}}</label></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div ng-show="!vm.studyAreaService.selectedStudyArea.NHDStreamIntersections">
                                    <b>There was error querying NHD Streams.</b>
                                </div>
                                <div ng-show="vm.studyAreaService.selectedStudyArea.NHDStreamIntersections.length == 0">
                                    <b>No NHD streams intersect the delineated basin.</b>
                                </div>
                                <br>
                                <h4>NHD Hydrologic Features Citations</h4>
                                <a href="https://hydro.nationalmap.gov/arcgis/rest/services/nhd/MapServer/6" target="_blank">U.S. Geological Survey, 2022, USGS TNM - National Hydrography Dataset, accessed July 21, 2022 at URL https://hydro.nationalmap.gov/arcgis/rest/services/nhd/MapServer/6.</a>
                            </div>
                        </div>
                    </div>

                    <!--Extensions results-->
                    <div ng-show="vm.extensions">
                        <div ng-repeat="sc in vm.extensions">          
                            <div ng-if="sc.code == 'QPPQ'">
                                <div class ="well well-sm">
                                    <h3 class="collapsible" ng-click="vm.collapseSection($event, 'stats', 'FDCTM')"><i ng-class="!vm.sectionCollapsed['FDCTM'] ? 'fa fa-chevron-right': 'fa fa-chevron-down'"></i>&nbsp;&nbsp;{{sc.name}} (FDCTM)</h3>
                                    <div class="collapsible-content">
                                        <ul ng-if="sc.result.length > 1" id="FDCTMTabs" class="nav nav-tabs" style="background-color:#e0e3e6 !important;">
                                            <li ng-repeat="r in sc.result" ng-class="{'active':vm.selectedFDCTMTabName===r.name}">
                                                <a ng-click="vm.selectFDCTMTab(r.name)">{{r.name}}</a>
                                            </li>
                                        </ul>
                                        
                                        <div ng-repeat="p in sc.parameters" ng-if="['sdate','edate'].indexOf(p.code) >-1">
                                            <span>{{p.name}}: {{p.value | date:'yyyy/MM/dd'}}</span><br />
                                        </div> 

                                        <div ng-repeat="r in sc.result" >          
                                            <div ng-if="vm.selectedFDCTMTabName === r.name || sc.result.length == 1" ng-init=vm.ActivateGraphs(r)>
                                                <!--FDCTM Exceedance Probablities-->
                                                <h3 class="reportChartHeader">Exceedance Probabilities of Clicked Point</h3>
                                                <button class="chartExportButton" ng-click="vm.downloadPNG('exceedancegraph')">Download PNG</button>
                                                <nvd3 id="exceedancegraph" options=r.graphdata.exceedance.options data=r.graphdata.exceedance.data></nvd3>
                                                <a ng-click="vm.isExceedanceTableOpen = !vm.isExceedanceTableOpen">
                                                    <span ng-show="vm.isExceedanceTableOpen">Hide</span>
                                                    <span ng-hide="vm.isExceedanceTableOpen">Show</span> table<br>
                                                </a>
                                                <div ng-if="vm.isExceedanceTableOpen" id="Exceedance Probabilities">
                                                    <div class="well well-sm">

                                                        <table id="exceedanceTable" class="table table-condensed" title="Exceedance Probabilities">
                                                            <thead>
                                                                <tr>
                                                                    <th>Exceedance</th>
                                                                    <th>Flow Exceeded (cfs)</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody ng-repeat="exceedanceProbability in r.exceedanceProbabilitiesArray | orderBy:'exceedance':true">
                                                                <tr>
                                                                    <td>{{exceedanceProbability.exceedance}}</td>
                                                                    <td>{{exceedanceProbability.flowExceeded}}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                                <!--Estimated Flow -->
                                                <h3 class="reportChartHeader">Estimated Flows</h3>
                                                <button class="chartExportButton" ng-click="vm.downloadPNG('flowgraph')">Download PNG</button>
                                                <nvd3 id="flowgraph" options=r.graphdata.flow.options data=r.graphdata.flow.data></nvd3>
                                                <a ng-click="vm.isFlowTableOpen = !vm.isFlowTableOpen">
                                                    <span ng-show="vm.isFlowTableOpen">Hide</span>
                                                    <span ng-hide="vm.isFlowTableOpen">Show</span> table
                                                </a>
                                                <div ng-if="vm.isFlowTableOpen" class="well well-sm">
                                                    <!--Table-->
                                                    <table id="flowTable" class="table table-condensed" title="Estimated Flows">
                                                        <thead>
                                                            <tr>
                                                                <th></th>
                                                                <th ng-attr-colspan="2">Discharge (cfs)</th>
                                                            </tr>
                                                            <tr>
                                                                <th>Date</th>
                                                                <th>Estimated</th>
                                                                <th>Observed ({{r.referanceGage.stationID}})</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody ng-repeat="obs in r.referanceGage.discharge.observations track by $index">
                                                            <tr>
                                                                <td>{{obs.date| date:'yyyy/MM/dd'}}</td>
                                                                <td>{{vm.getEstimatedFlow(obs,r.estimatedFlow.observations)}}</td>
                                                                <td>{{obs.hasOwnProperty('value') ? obs.value.toUSGSvalue() : obs.hasOwnProperty('dataCode') ? obs.dataCode : 'N/A'}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                                <!--Index gage-->
                                                <div class="well well-sm">
                                                    <table id="ReferenceGage" class="table table-condensed">
                                                        <thead>
                                                            <tr>
                                                                <th>Index Gage</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>Station ID:</td>
                                                                <td><a ng-attr-title={{r.referanceGage.name}} ng-href={{r.referanceGage.url}} target="_blank">{{r.referanceGage.stationID}}</a>&nbsp;
                                                                    <a ng-click="vm.openGagePage(r.referanceGage.stationID)">Open Gage Page</a>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>Name:</td>
                                                                <td><span>{{r.referanceGage.name}}</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td>Latitude:</td>
                                                                <td><span>{{r.referanceGage.latitude_DD}}</span><span> Decimal Degrees</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td>Longitude:</td>
                                                                <td><span>{{r.referanceGage.longitude_DD}}</span><span> Decimal Degrees</span></td>
                                                            </tr>
                                                            <tr>
                                                                <td>NWIS Drainage Area:</td>
                                                                <td><span>{{r.referanceGage.drainageArea_sqMI}}</span><span> square miles</span></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <h4>Flow-Duration Curve Transfer Method Citations</h4>
                                        <a href="https://doi.org/10.3133/sir20155181" target="_blank">Lorenz, D.L., and Ziegeweid, J.R., 2016, Methods to estimate historical daily streamflow for ungaged stream locations in Minnesota: U.S. Geological Survey Scientific Investigations Report 2015–5181, 18 p.</a>
                                    </div>
                                </div>
                            </div><!--end QPPQ-->
                        </div><!--end sc-->
                    </div><!--end extension-->

                    <!-- Flow Anywhere Method -->
                    <div ng-if="vm.regionService.selectedRegion.Applications.indexOf('FLA') != -1 && vm.studyAreaService.flowAnywhereData">
                        <div class ="well well-sm">
                            <h3 class="collapsible" ng-click="vm.collapseSection($event, 'stats', 'FLA')"><i ng-class="!vm.sectionCollapsed['FLA'] ? 'fa fa-chevron-right': 'fa fa-chevron-down'"></i>&nbsp;&nbsp;Flow Anywhere Method</h3>
                            <div class="collapsible-content">
                                <div ng-if="vm.studyAreaService.flowAnywhereData.results">
                                    <div class="wim-alert-warning" ng-if="vm.studyAreaService.flowAnywhereData.results.Warnings.length > 0">{{vm.studyAreaService.flowAnywhereData.results.Warnings}}</div>

                                    <!--Flow Anywhere Estimated Flow-->
                                    <h3 class="reportChartHeader">Estimated Flow</h3>
                                    <button class="chartExportButton" ng-click="vm.downloadPNG('estimatedFlowFLAGraph')">Download PNG</button>
                                    <nvd3 id="estimatedFlowFLAGraph" options="vm.studyAreaService.flowAnywhereData.graphData.options" data="vm.studyAreaService.flowAnywhereData.graphData.data"></nvd3>
                                    <a ng-click="vm.isEstimatedFlowFLATableOpen = !vm.isEstimatedFlowFLATableOpen">
                                        <span ng-show="vm.isEstimatedFlowFLATableOpen">Hide</span>
                                        <span ng-hide="vm.isEstimatedFlowFLATableOpen">Show</span> table<br>
                                    </a>
                                    <div ng-if="vm.isEstimatedFlowFLATableOpen">
                                        <div class="well well-sm">

                                            <table id="estimatedFlowFLATable" class="table table-condensed" title="Estimated Flow">
                                                <thead>
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Estimated Flow (cfs)</th>
                                                        <th>Observed Flow ({{vm.studyAreaService.flowAnywhereData.selectedGage.StationID}}) (cfs)</th>
                                                    </tr>
                                                </thead>
                                                <tbody ng-repeat="estimatedFlow in vm.studyAreaService.flowAnywhereData.estimatedFlowsArray">
                                                    <tr>
                                                        <td>{{estimatedFlow.date | date:'yyyy/MM/dd'}}</td>
                                                        <td>{{estimatedFlow.estimatedFlow.toUSGSvalue()}}</td>
                                                        <td>{{estimatedFlow.observedFlow.toUSGSvalue()}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <h3 class="reportChartHeader">Model Inputs</h3>
                                    <div class="well well-sm">
                                        <table id="flowAnywhereReferenceGage" class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <th>Reference Gage</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="col-md-5">Station ID:</td>
                                                    <td><a ng-click="vm.openGagePage(vm.studyAreaService.flowAnywhereData.selectedGage.StationID)">{{vm.studyAreaService.flowAnywhereData.selectedGage.StationID}}</a></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Name:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.selectedGage.Name}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Latitude:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.selectedGage.Latitude_DD}}</span><span> Decimal Degrees</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Longitude:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.selectedGage.Longitude_DD}}</span><span> Decimal Degrees</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Drainage Area:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.selectedGage.DrainageArea_sqMI}}</span><span> square miles</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Aggregated Region:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.selectedGage.AggregatedRegion}}</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <table id="flowAnywhereModelParameters" class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <th>Model Parameters</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="col-md-5">Start Date:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.graphData.data[0].values[0].x | date:'yyyy/MM/dd'}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">End Date:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.graphData.data[0].values[vm.studyAreaService.flowAnywhereData.graphData.data[0].values.length-1].x | date:'yyyy/MM/dd'}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Drainage Area Ratio:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.results.AreaRato.toUSGSvalue()}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Constant 1</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.results.Const1}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Constant 2:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.results.Const2}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="col-md-5">Constant 3:</td>
                                                    <td class="col-md-7"><span>{{vm.studyAreaService.flowAnywhereData.results.Const3}}</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <h4>Flow Anywhere Method Citations</h4>
                                    <a href="https://doi.org/10.3133/sir20125232" target="_blank">Linhart, S.M., Nania, J.F., Sanders, C.L., Jur., and and Archfield, S.A., 2012, Computing daily mean streamflow at ungaged locations in Iowa by using the Flow Anywhere and Flow Duration Curve Transfer statistical methods: U.S. Geological Survey Scientific Investigations Report 2012-5232, 50 p.</a>
                                </div>
                                <span ng-if="!vm.studyAreaService.flowAnywhereData.results" class="reportSpinner">&nbsp;<i class="fa fa-spinner fa-3x fa-spin loadingSpinner"></i></span>
                            </div>

                        </div>
                    </div>

                <!-- Channel Width Weighting Application -->     
                <div class="well well-sm"  ng-if="vm.regionService.selectedRegion.Applications.indexOf('ChannelWidthWeighting') != -1 && vm.nssService.selectedStatisticsGroupList.name.indexOf('Peak-Flow Statistics') != -1">
                    <h3 class="collapsible" ng-click="vm.collapseSection($event, 'stats', 'ChannelWidthWeighting')"><i ng-class="!vm.sectionCollapsed['ChannelWidthWeighting'] ? 'fa fa-chevron-right': 'fa fa-chevron-down'"></i>&nbsp;&nbsp;Channel-width Methods Weighting</h3>
                        <div class="collapsible-content">
                            <div ng-if="vm.nssService.equationWeightingResults.length == 0">No method weighting results returned.</div>
                            <div ng-if="vm.nssService.equationWeightingResults.length != 0">
                                <div ng-repeat="message in vm.nssService.equationWeightingDisclaimers track by $index">
                                    <div class="wim-alert-warning">{{message}}</div>
                                </div>
                                <span>PIL: Lower 90% Prediction Interval, PIU: Upper 90% Prediction Interval, ASEp: Average Standard Error of Prediction</span>
                                <div ng-repeat="rr in vm.nssService.equationWeightingResults">
                                    <h3>{{rr.RR}}</h3>
                                    <table id="channelWidthWeightingTable" class="scenarioFlowTable table table-condensed">
                                        <thead class="flow-table">
                                            <tr>
                                                <th>Statistic</th>
                                                <th>Value</th>
                                                <th>Unit</th>
                                                <th>PIL</th>
                                                <th>PIU</th>
                                                <th>SEP</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="stat in rr.Results | orderBy:'Name' track by $index ">
                                                <td>{{stat.Name}}</td>
                                                <td>{{stat.Z.toUSGSvalue()}}</td> 
                                                <td>{{stat.Unit.abbr}}</td> 
                                                <td>{{stat.PIl.toUSGSvalue()}}</td> 
                                                <td>{{stat.PIu.toUSGSvalue()}}</td> 
                                                <td>{{stat.SEPZ.toUSGSvalue()}}</td> 
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <h4>Channel-width Methods Weighting Citations</h4>
                                <a href="https://pubs.er.usgs.gov/publication/sir20205142" target="_blank">Chase, K.J., Sando, R., Armstrong, D.W., and McCarthy, P., 2021, Regional regression equations based on channel-width characteristics to estimate peak-flow frequencies at ungaged sites in Montana using peak-flow frequency data through water year 2011 (ver. 1.1, September 2021): U.S. Geological Survey Scientific Investigations Report 2020-5142, 49 p.</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="disclaimerReport">
                    <p ng-show="vm.studyAreaService.selectedStudyArea.Disclaimers.isStormDrain">
                        USGS Storm Drain Disclaimer:
                        The Storm Drain methods are being provided to meet the need for timely best science and are released on the condition that neither the USGS nor the U.S. Government may be held liable for any damages resulting from authorized or unauthorized use. At his time these methods are provisional and are subject to revision until thoroughly reviewed and approved.
                    </p>
                    <p>
                        USGS Data Disclaimer:
                        Unless otherwise stated, all data, metadata and related materials are considered to satisfy the quality standards relative to the purpose for which the data were collected. Although these data and associated metadata have been reviewed for accuracy and completeness and approved for release by the U.S. Geological Survey (USGS), no warranty expressed or implied is made regarding the display or utility of the data for other purposes, nor on all computer systems, nor shall the act of distribution constitute any such warranty.
                    </p>
                    <p>
                        USGS Software Disclaimer:
                        This software has been approved for release by the U.S. Geological Survey (USGS). Although the software has been subjected to rigorous review, the USGS reserves the right to update the software as needed pursuant to further analysis and review. No warranty, expressed or implied, is made by the USGS or the U.S. Government as to the functionality of the software and related material nor shall the fact of release constitute any such warranty. Furthermore, the software is released on condition that neither the USGS nor the U.S. Government shall be held liable for any damages resulting from its authorized or unauthorized use.
                    </p>
                    <p>
                        USGS Product Names Disclaimer:
                        Any use of trade, firm, or product names is for descriptive purposes only and does not imply endorsement by the U.S. Government.
                    </p>
                    <p>
                        <span>Application Version: {{vm.AppVersion}}</span>
                        <span ng-show="vm.environment == 'development'">[Development Version: Not for public consumption]</span><br>
                        <span>StreamStats Services Version: {{vm.SSServicesVersion}}</span>
                        <span ng-show="vm.environment == 'development'">[Development Version: Not for public consumption]</span><br>
                        <span>NSS Services Version: {{vm.NSSServicesVersion}}</span>
                        <span ng-show="vm.environment == 'development'">[Development Version: Not for public consumption]</span>
                    </p>


                </div>
            </div>

            <div id="downloadButtons" class="hidden-print">
                <div class="btn-group wim-btn-group" dropdown is-open="status.isopen">
                    <button type="button" class="btn-black" dropdown-toggle ng-disabled="!vm.studyAreaService.additionalFeaturesLoaded">
                        <i ng-class="vm.studyAreaService.additionalFeaturesLoaded ? 'fa fa-download' : 'fa fa-refresh fa-spin'"></i>&nbsp;&nbsp;Download<span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#" ng-click="vm.downloadGeoJSON()"><span class="fa fa-download"></span>&nbsp;&nbsp;GeoJSON</a></li>
                        <li><a href="#" ng-click="vm.isFlowTableOpen = true; vm.isExceedanceTableOpen = true; vm.downloadCSV()"><span class="fa fa-download"></span>&nbsp;&nbsp;CSV</a></li>
                        <li><a href="#" ng-click="vm.downloadShapeFile()"><span class="fa fa-download"></span>&nbsp;&nbsp;ShapeFile</a></li>
                        <li><a href="#" ng-click="vm.downloadKML()"><span class="fa fa-download"></span>&nbsp;&nbsp;KML</a></li>
                    </ul>
                </div>
            </div>
        </div>
       
    </div>
    <div class="modal-footer hidden-print">
        <div class="btn-group">
            <button class="btn-black" ng-click="vm.close()"><i class="fa fa-close"></i>&nbsp;&nbsp;Close</button>
            <button class="btn-blue" ng-click="vm.print()"><i class="fa fa-print"></i>&nbsp;&nbsp;Print</button>
        </div>
    </div>
    
</div>
